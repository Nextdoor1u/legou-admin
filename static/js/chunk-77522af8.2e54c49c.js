(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77522af8"],{4624:function(t,e,a){"use strict";e["a"]={data:function(){return{tableData:{start:1,limit:10,total:0,layout:"->,total, sizes, prev, pager, next, jumper",size:[5,10,15,20]}}}}},"4c01":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"e",(function(){return i})),a.d(e,"b",(function(){return l}));a("99af");var n=a("b775");function o(){return Object(n["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function s(t,e){return Object(n["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e)})}function r(t){return Object(n["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/lejuAdmin/brand/delBrand/"+t,method:"delete"})}},"65ec":function(t,e,a){},"7adc":function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"m",(function(){return s})),a.d(e,"g",(function(){return r})),a.d(e,"a",(function(){return i})),a.d(e,"h",(function(){return l})),a.d(e,"i",(function(){return u})),a.d(e,"j",(function(){return c})),a.d(e,"k",(function(){return d})),a.d(e,"l",(function(){return p})),a.d(e,"f",(function(){return f})),a.d(e,"n",(function(){return m})),a.d(e,"c",(function(){return b})),a.d(e,"b",(function(){return h})),a.d(e,"e",(function(){return g})),a.d(e,"o",(function(){return k}));a("99af");var n=a("b775");function o(){return Object(n["a"])({url:"/lejuAdmin/category/getAllCategory",method:"get"})}function s(t){return Object(n["a"])({url:"/lejuAdmin/category/updateCategory",method:"post",data:t})}function r(t,e,a){return Object(n["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:a})}function i(t){return Object(n["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/lejuAdmin/product/switchNewStatus",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/lejuAdmin/product/switchPreviewStatus",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/lejuAdmin/product/switchPublishStatus",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/lejuAdmin/product/switchRecommandStatus",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/lejuAdmin/product/switchVerifyStatus",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/lejuAdmin/product/productSkusDetail/"+t})}function m(t){return Object(n["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/lejuAdmin/sku/delSku/"+t,method:"delete"})}function h(t){return Object(n["a"])({url:"/lejuAdmin/sku/addProductSkus",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/lejuAdmin/sku/getSkusByProductId/"+t})}function k(t){return Object(n["a"])({url:"/lejuAdmin/sku/updateSkuInfo",method:"post",data:t})}},a6bc:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("el-collapse",[a("el-collapse-item",{attrs:{title:"商品管理介绍"}},[a("div",[t._v("商品管理模块可以对客户端的商品进行增删改查等相关操作,来控制客户端商品的列表展示和商品详情")])])],1),a("div",{staticClass:"content",staticStyle:{padding:"20px","margin-bottom":"20px"},attrs:{accordion:""}},[a("el-collapse",[a("el-collapse-item",{attrs:{title:"条件查询"}},[a("el-form",{ref:"form",attrs:{model:t.goodsData,"label-width":"100px",size:"mini"}},[a("el-row",{staticStyle:{padding:"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"商品名称/模糊查询"},model:{value:t.goodsData.name,callback:function(e){t.$set(t.goodsData,"name",e)},expression:"goodsData.name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商品货号"}},[a("el-input",{attrs:{placeholder:"商品货号"},model:{value:t.goodsData.productSn,callback:function(e){t.$set(t.goodsData,"productSn",e)},expression:"goodsData.productSn"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌"}},[a("el-select",{attrs:{placeholder:"品牌",size:"mini"},model:{value:t.goodsData.brandId,callback:function(e){t.$set(t.goodsData,"brandId",e)},expression:"goodsData.brandId"}},t._l(t.brandList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"上架状态"}},[a("el-select",{attrs:{placeholder:"上架状态",size:"mini"},model:{value:t.goodsData.publishStatus,callback:function(e){t.$set(t.goodsData,"publishStatus",e)},expression:"goodsData.publishStatus"}},[a("el-option",{attrs:{label:"上架",value:1}}),a("el-option",{attrs:{label:"未上架",value:0}})],1)],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{attrs:{placeholder:"审核状态"},model:{value:t.goodsData.verifyStatus,callback:function(e){t.$set(t.goodsData,"verifyStatus",e)},expression:"goodsData.verifyStatus"}},[a("el-option",{attrs:{label:"审核",value:1}}),a("el-option",{attrs:{label:"未审核",value:0}})],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("提交")]),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1)],1)],1)],1)],1),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",plain:"",size:"mini"}},[a("router-link",{attrs:{to:"/product/add"}},[t._v("新增商品")])],1),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.exportExcel}},[t._v("导出商品excel文件")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodsList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"80px",fixed:""}}),a("el-table-column",{attrs:{label:"商品图片",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"img",attrs:{src:t.row.pic}})]}}])}),a("el-table-column",{attrs:{label:"商品名称",align:"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.name))]),a("p",[t._v("品牌:"+t._s(e.row.brandName))]),a("p",[t._v(t._s(e.row.description))])]}}])}),a("el-table-column",{attrs:{prop:"address",label:"商品价格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("原件:"+t._s(e.row.originalPrice))]),a("p",[t._v("现价:"+t._s(e.row.price))])]}}])}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别",align:"center"}}),a("el-table-column",{attrs:{label:"最新/推荐",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(" 最新:"),a("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:function(a){return t.upDataNew(a,e.row.id,t.switchNewStatus)}},model:{value:e.row.newStatus,callback:function(a){t.$set(e.row,"newStatus",a)},expression:"scope.row.newStatus"}})],1),a("div",[t._v(" 推荐:"),a("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:function(a){return t.upDataNew(a,e.row.id,t.switchRecommandStatus)}},model:{value:e.row.recommendStatus,callback:function(a){t.$set(e.row,"recommendStatus",a)},expression:"scope.row.recommendStatus"}})],1)]}}])}),a("el-table-column",{attrs:{label:"最新/推荐",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(" 审核:"),a("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:function(a){return t.upDataNew(a,e.row.id,t.switchVerifyStatus)}},model:{value:e.row.verifyStatus,callback:function(a){t.$set(e.row,"verifyStatus",a)},expression:"scope.row.verifyStatus"}})],1),a("div",[t._v(" 发布:"),a("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:function(a){return t.upDataNew(a,e.row.id,t.switchPublishStatus)}},model:{value:e.row.publishStatus,callback:function(a){t.$set(e.row,"publishStatus",a)},expression:"scope.row.publishStatus"}})],1)]}}])}),a("el-table-column",{attrs:{label:"sku",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return t.editSku(e.row.id)}}},[t._v("编辑sku")])]}}])}),a("el-table-column",{attrs:{prop:"weight",label:"重量",align:"center"}}),a("el-table-column",{attrs:{prop:"sort",label:"排序",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",underline:!1},on:{click:function(a){return t.goEdit(e.row.id)}}},[t._v("编辑")]),a("el-link",{attrs:{type:"warning",underline:!1}},[t._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.tableData.start,"page-sizes":t.tableData.size,"page-size":t.tableData.limit,layout:t.tableData.layout,total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"sku列表",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",{attrs:{gutter:20,type:"flex",justify:"end"}},[a("el-col",{attrs:{span:4,offset:0}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addSku}},[t._v("新增")])],1)],1),a("el-table",{attrs:{data:t.goodsInfo,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",align:"center",fixed:""}}),a("el-table-column",{attrs:{label:"图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-upload",{staticClass:"upload-demo",attrs:{headers:t.token,action:"/lejuAdmin/material/uploadFileOss","on-success":function(a){return t.imgSuccess(a,e.row)},"show-file-list":!1}},[e.row.pic?a("img",{staticClass:"img",attrs:{src:e.row.pic}}):a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])]}}])}),a("el-table-column",{attrs:{label:"颜色",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.spData[0].value,callback:function(a){t.$set(e.row.spData[0],"value",a)},expression:"scope.row.spData[0].value"}})]}}])}),a("el-table-column",{attrs:{label:"大小",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.spData[1].value,callback:function(a){t.$set(e.row.spData[1],"value",a)},expression:"scope.row.spData[1].value"}})]}}])}),a("el-table-column",{attrs:{label:"库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.stock,callback:function(a){t.$set(e.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),a("el-table-column",{attrs:{label:"预警库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"预警库存"},model:{value:e.row.lowStock,callback:function(a){t.$set(e.row,"lowStock",a)},expression:"scope.row.lowStock "}})]}}])}),a("el-table-column",{attrs:{label:"锁定库存",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini"},model:{value:e.row.lockStock,callback:function(a){t.$set(e.row,"lockStock",a)},expression:"scope.row.lockStock "}})]}}])}),a("el-table-column",{attrs:{label:"sku编码",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"自定义sku编码"},model:{value:e.row.skuCode,callback:function(a){t.$set(e.row,"skuCode",a)},expression:"scope.row.skuCode"}})]}}])}),a("el-table-column",{attrs:{label:"销量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"销量"},model:{value:e.row.sale,callback:function(a){t.$set(e.row,"sale",a)},expression:"scope.row.sale "}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"130px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{staticStyle:{"font-size":"12px","margin-right":"5px"},attrs:{type:"danger",underline:!1},on:{click:function(a){return t.delSku(e.row.id)}}},[t._v("删除")]),e.row.id?a("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary",underline:!1},on:{click:function(a){return t.changeSku(e.row)}}},[t._v("修改编辑")]):a("el-link",{staticStyle:{"font-size":"12px","margin-right":"5px"},attrs:{type:"primary",underline:!1},on:{click:function(a){return t.savaSku(e.row)}}},[t._v("保存")])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)},o=[],s=a("5530"),r=(a("d3b7"),a("159b"),a("3ca3"),a("ddb0"),a("d81d"),a("e9c4"),a("7adc")),i=a("4c01"),l=a("4624"),u=a("2f4d"),c={name:"PrductList",mixins:[l["a"]],data:function(){return{token:{token:Object(u["b"])()},goodsList:[],brandList:[],goodsData:{brandId:"",id:"",name:"",productCategoryId:"",productSn:"",publishStatus:"",verifyStatus:""},switchNewStatus:r["h"],switchPreviewStatus:r["i"],switchPublishStatus:r["j"],switchRecommandStatus:r["k"],switchVerifyStatus:r["l"],dialogVisible:!1,checkId:"",goodsInfo:[],isAdd:!1}},created:function(){},mounted:function(){this.getGoodsList(),this.getBrandList()},methods:{getGoodsList:function(){var t=this;Object(r["g"])(this.tableData.start,this.tableData.limit,this.goodsData).then((function(e){e.data.rows.forEach((function(t){t.newStatus=!!t.newStatus,t.recommendStatus=!!t.recommendStatus,t.verifyStatus=!!t.verifyStatus,t.publishStatus=!!t.publishStatus})),t.goodsList=e.data.rows,t.tableData.total=e.data.total}))},getBrandList:function(){var t=this;Object(i["c"])().then((function(e){t.brandList=e.data.items}))},submitForm:function(){this.getGoodsList()},reset:function(){this.goodsData={brandId:"",id:"",name:"",productCategoryId:"",productSn:"",publishStatus:"",verifyStatus:""}},handleSizeChange:function(t){this.tableData.limit=t,this.getGoodsList()},handleCurrentChange:function(t){this.tableData.start=t,this.getGoodsList()},upDataNew:function(t,e,a){var n=this;a({productId:e,status:t?1:0}).then((function(t){t.success&&(n.getGoodsList(),n.$message.success("更新状态成功"))}))},exportExcel:function(){var t=this;Promise.all([a.e("chunk-3efae880"),a.e("chunk-3d3606e8"),a.e("chunk-2125b98f")]).then(a.bind(null,"4bf8")).then((function(e){var a=["商品名称","商品价格"],n=["name","originalPrice"],o=t.goodsList,s=t.formatJson(n,o);e.export_json_to_excel({header:a,data:s,filename:"商品列表",autoWidth:!0,bookType:"xlsx"})}))},formatJson:function(t,e){return e.map((function(e){return t.map((function(t){return"timestamp"===t?parseTime(e[t]):e[t]}))}))},goEdit:function(t){this.$router.push({path:"/product/edit",query:{id:t}})},getSkuList:function(t){var e=this;Object(r["e"])(t).then((function(t){t.data.items.forEach((function(t){t.spData=JSON.parse(t.spData)})),e.goodsInfo=t.data.items}))},editSku:function(t){this.checkId=t,this.getSkuList(this.checkId),this.dialogVisible=!0},delSku:function(t){var e=this;console.log(t),this.$confirm("是否要删除sku?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["c"])(t).then((function(t){t.success&&(e.$message({type:"success",message:"删除成功!"}),e.getSkuList(e.checkId))}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},changeSku:function(t){var e=this;console.log(t);var a=Object(s["a"])({},t);a.spData=JSON.stringify(a.spData),Object(r["o"])(a).then((function(t){t.success&&e.$message.success("修改sku成功")}))},imgSuccess:function(t,e){e.pic=t.data.fileUrl},addSku:function(){var t={createTime:"",id:"",lockStock:"",lowStock:"",modifyTime:"",pic:"",price:"",productId:"",promotionPrice:"",sale:"",skuCode:"",spData:[{key:"颜色",value:""},{key:"大小",value:""}],stock:""};this.goodsInfo.push(t)},savaSku:function(t){var e=this;console.log(t);var a=Object(s["a"])({},t);a.productId=this.checkId,a.spData=JSON.stringify(a.spData),Object(r["b"])(a).then((function(t){t.success&&e.getSkuList(e.checkId)}))}}},d=c,p=(a("f480"),a("2877")),f=Object(p["a"])(d,n,o,!1,null,"5b7aaf0d",null);e["default"]=f.exports},f480:function(t,e,a){"use strict";a("65ec")}}]);