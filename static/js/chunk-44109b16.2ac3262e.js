(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44109b16"],{"016d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MarketList"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("新增")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",fixed:"",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{label:"商品图片",align:"center","header-align":"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"img",attrs:{src:t.row.pic}})]}}])}),a("el-table-column",{attrs:{prop:"title",label:"活动时间",align:"center","header-align":"center",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v("开始时间:"+t._s(e.row.promotionStartTime))]),a("div",[t._v("结束时间:"+t._s(e.row.promotionEndTime))])]}}])}),a("el-table-column",{attrs:{label:"是否过期",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(e.row.isActive?"没有过期":"过期"))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品名称",align:"center","header-align":"center",width:"300"}}),a("el-table-column",{attrs:{prop:"brandName",label:"品牌名称",width:"300",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"price",label:"价格",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center","header-align":"center",width:"350"}}),a("el-table-column",{attrs:{prop:"title",label:"操作",align:"center",fixed:"right","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(a){return t.remove(e.row.recommendId)}}},[t._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"热销详情",visible:t.dialogVisible,width:"80%",top:"4vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("条件查询")])]),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.goodsData}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"商品名称/模糊查询",size:"mini"},model:{value:t.goodsData.name,callback:function(e){t.$set(t.goodsData,"name",e)},expression:"goodsData.name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"商品货号",size:"mini"},model:{value:t.goodsData.productSn,callback:function(e){t.$set(t.goodsData,"productSn",e)},expression:"goodsData.productSn"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"品牌",size:"mini"},model:{value:t.goodsData.brandId,callback:function(e){t.$set(t.goodsData,"brandId",e)},expression:"goodsData.brandId"}},t._l(t.brandList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"上架状态",size:"mini"},model:{value:t.goodsData.publishStatus,callback:function(e){t.$set(t.goodsData,"publishStatus",e)},expression:"goodsData.publishStatus"}},[a("el-option",{attrs:{label:"上架",value:1}}),a("el-option",{attrs:{label:"下架",value:0}})],1)],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"审核状态",size:"mini"},model:{value:t.goodsData.verifyStatus,callback:function(e){t.$set(t.goodsData,"verifyStatus",e)},expression:"goodsData.verifyStatus"}},[a("el-option",{attrs:{label:"审核通过",value:1}}),a("el-option",{attrs:{label:"未审核",value:0}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.onSubmit}},[t._v("查询")]),a("el-button",{attrs:{size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),a("el-card",{attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("商品列表")])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodsList,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"date",label:"选择",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio",{attrs:{label:e.row.id},on:{change:function(a){return t.editRecommend(e.row)}}},[t._v(t._s(""))])],1)]}}])}),a("el-table-column",{attrs:{label:"商品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.pic}})]}}])}),a("el-table-column",{attrs:{label:"商品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.name))]),a("p",[t._v("品牌:"+t._s(e.row.brandName)+" | "+t._s(e.row.description))])]}}])}),a("el-table-column",{attrs:{prop:"date",label:"商品价格",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("原价:"+t._s(e.row.originalPrice))]),a("p",[t._v("现价:"+t._s(e.row.price))])]}}])}),a("el-table-column",{attrs:{prop:"productCategoryName",label:"商品类别",align:"center"}}),a("el-table-column",{attrs:{prop:"weight",label:"重量",align:"center"}})],1),a("el-pagination",{attrs:{"current-page":t.tableData.start,"page-sizes":t.tableData.size,"page-size":t.tableData.limit,layout:t.tableData.layout,total:t.tableData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"编辑限时活动",visible:t.editdialogVisible,width:"70%","append-to-body":""},on:{"update:visible":function(e){t.editdialogVisible=e}}},[a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:10,offset:2}},[a("strong",[t._v("商品原价")]),t._v(" "+t._s(t.editData.originalPrice)+" ")]),a("el-col",{attrs:{span:10,offset:2}},[a("strong",[t._v("商品名称")]),t._v(" "+t._s(t.editData.name)+" ")])],1),a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:10,offset:2}},[a("strong",[t._v("促销价格")]),a("el-input-number",{attrs:{size:"mini",min:1,max:t.editData.price},model:{value:t.editData.promotionPrice,callback:function(e){t.$set(t.editData,"promotionPrice",e)},expression:"editData.promotionPrice"}})],1),a("el-col",{attrs:{span:10,offset:2}},[a("strong",[t._v("排序")]),a("el-input-number",{attrs:{size:"mini",min:1,max:1e3},model:{value:t.editData.sort,callback:function(e){t.$set(t.editData,"sort",e)},expression:"editData.sort"}})],1)],1),a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:10,offset:2}},[a("strong",[t._v("开始时间")]),a("el-date-picker",{staticClass:"myInput",attrs:{type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"mini"},model:{value:t.editData.promotionStartTime,callback:function(e){t.$set(t.editData,"promotionStartTime",e)},expression:"editData.promotionStartTime"}})],1),a("el-col",{attrs:{span:10,offset:2}},[a("strong",[t._v("结束时间")]),a("el-date-picker",{staticClass:"myInput",attrs:{type:"datetime",placeholder:"结束时间","value-format":"yyyy-MM-dd HH:mm:ss",size:"mini"},model:{value:t.editData.promotionEndTime,callback:function(e){t.$set(t.editData,"promotionEndTime",e)},expression:"editData.promotionEndTime"}})],1)],1),a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:10,offset:2}},[a("strong",[t._v("活动限购数量")]),a("el-input",{attrs:{size:"mini"},model:{value:t.editData.promotionPerLimit,callback:function(e){t.$set(t.editData,"promotionPerLimit",e)},expression:"editData.promotionPerLimit "}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.editdialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.addRecommend}},[t._v("确 定")])],1)],1)],1)],1)},n=[],o=a("c7eb"),r=a("1da1"),l=(a("d3b7"),a("159b"),a("441d")),s=a("4c01"),d=a("4624"),c={name:"MarketList",mixins:[d["a"]],data:function(){return{value:"",list:[],goodsList:[],brandList:[],goodsData:{brandId:"",id:"",name:"",productCategoryId:"",productSn:"",publishStatus:"",verifyStatus:""},editData:{brandName:"",createTime:"",modifyTime:"",name:"",pic:"",price:"",productCategoryName:"",productId:"",productSn:"",promotionEndTime:"",promotionPerLimit:"",promotionPrice:"",promotionStartTime:"",publishStatus:"",recommendId:"",sort:"",type:""},isReoveShow:!1,dialogVisible:!1,editdialogVisible:!1,radio:""}},created:function(){},mounted:function(){this.getList(),this.getGoodsList(),this.getBrandList()},methods:{getList:function(){var t=this;return Object(r["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["c"])();case 2:a=e.sent,a.data.items.forEach((function(t){t.isActive=new Date(t.promotionEndTime).getTime()-(new Date).getTime()>=0})),t.list=a.data.items;case 5:case"end":return e.stop()}}),e)})))()},getGoodsList:function(){var t=this;Object(l["d"])(this.tableData.start,this.tableData.limit,this.goodsData).then((function(e){e.data.rows.forEach((function(t){t["isSelect"]=!1})),t.goodsList=e.data.rows,t.tableData.total=e.data.total}))},getBrandList:function(){var t=this;Object(s["c"])().then((function(e){t.brandList=e.data.items}))},remove:function(t){var e=this;this.$confirm("此操作将永久删除该活动, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["b"])(t).then((function(t){t.success&&(e.$message({type:"success",message:"删除成功!"}),e.getList())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},onSubmit:function(){this.getGoodsList()},reset:function(){this.goodsData={brandId:"",id:"",name:"",productCategoryId:"",productSn:"",publishStatus:"",verifyStatus:""}},handleSizeChange:function(t){this.tableData.limit=t,this.getGoodsList()},handleCurrentChange:function(t){this.tableData.start=t,this.getGoodsList()},editRecommend:function(t){this.editdialogVisible=!0,console.log(t),this.editData=t,this.editData.productId=t.id},addRecommend:function(){var t=this;Object(l["a"])(this.editData).then((function(e){e.success&&(t.$message.success("添加成功"),t.editData={brandName:"",createTime:"",modifyTime:"",name:"",pic:"",price:"",productCategoryName:"",productId:"",productSn:"",promotionEndTime:"",promotionPerLimit:"",promotionPrice:"",promotionStartTime:"",publishStatus:"",recommendId:"",sort:"",type:""},t.dialogVisible=!1,t.editdialogVisible=!1,t.getList())}))}}},u=c,m=(a("375d"),a("2877")),p=Object(m["a"])(u,i,n,!1,null,"72e11504",null);e["default"]=p.exports},"375d":function(t,e,a){"use strict";a("d53f")},"441d":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return r})),a.d(e,"a",(function(){return l}));a("99af");var i=a("b775");function n(){return Object(i["a"])({url:"/lejuAdmin/homeRecommend/findAllRecommends",method:"get"})}function o(t){return Object(i["a"])({url:"/lejuAdmin/homeRecommend/delRecommend/"+t,method:"delete"})}function r(t,e,a){return Object(i["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:a})}function l(t){return Object(i["a"])({url:"lejuAdmin/homeRecommend/addRecommend",method:"post",data:t})}},4624:function(t,e,a){"use strict";e["a"]={data:function(){return{tableData:{start:1,limit:10,total:0,layout:"->,total, sizes, prev, pager, next, jumper",size:[5,10,15,20]}}}}},"4c01":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return r})),a.d(e,"e",(function(){return l})),a.d(e,"b",(function(){return s}));a("99af");var i=a("b775");function n(){return Object(i["a"])({url:"/lejuAdmin/brand/findAllBrand",method:"get"})}function o(t,e){return Object(i["a"])({url:"/lejuAdmin/brand/findBrandByPage/".concat(t,"/").concat(e)})}function r(t){return Object(i["a"])({url:"/lejuAdmin/brand/addBrand",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/lejuAdmin/brand/updateBrand",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/lejuAdmin/brand/delBrand/"+t,method:"delete"})}},d53f:function(t,e,a){}}]);